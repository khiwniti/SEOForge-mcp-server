# SEOForge MCP Server - WordPress Integration Guide

This guide provides comprehensive instructions for setting up and testing the SEOForge MCP server with WordPress plugins.

## üöÄ Quick Start

### 1. Deploy MCP Server

#### Option A: Deploy to Vercel (Recommended)

```bash
# Clone the repository
git clone https://github.com/khiwniti/SEOForge-mcp-server.git
cd SEOForge-mcp-server

# Install Vercel CLI
npm install -g vercel

# Deploy to Vercel
vercel --prod
```

#### Option B: Run Locally for Testing

```bash
cd backend
pip install -r requirements.txt
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### 2. Configure Environment Variables

Set these environment variables in Vercel or your local environment:

```bash
WORDPRESS_SECRET_KEY=your-secret-key-here
ALLOWED_WORDPRESS_DOMAINS=yourdomain.com,playground.wordpress.net
REDIS_HOST=your-redis-host (optional)
REDIS_PORT=6379 (optional)
REDIS_PASSWORD=your-redis-password (optional)
```

### 3. Install WordPress Plugin

#### Method 1: WordPress Playground (For Testing)

1. Go to [WordPress Playground](https://playground.wordpress.net/)
2. Navigate to **Plugins > Add New > Upload Plugin**
3. Upload the plugin ZIP file (generated by test script)
4. Activate the plugin

#### Method 2: Manual Installation

1. Download the `wordpress-plugin` folder
2. Upload to your WordPress `/wp-content/plugins/` directory
3. Rename to `seoforge-mcp`
4. Activate in WordPress admin

### 4. Configure WordPress Plugin

1. Go to **SEOForge MCP > Settings** in WordPress admin
2. Configure the following:
   - **API URL**: Your Vercel deployment URL or `http://localhost:8000`
   - **API Key**: Any string (for identification)
   - **Secret Key**: Must match `WORDPRESS_SECRET_KEY` on server
   - **Default Language**: English or Thai
3. Click **Test Connection** to verify setup

## üß™ Testing

### Automated Testing

Run the comprehensive test suite:

```bash
# Test MCP server functionality
python test_mcp_server.py --url https://your-domain.vercel.app

# Test WordPress integration
python test_wordpress_playground.py --mcp-url https://your-domain.vercel.app
```

### Manual Testing in WordPress

1. **Content Generation Test**
   - Create a new post
   - In the SEOForge Content Generator sidebar:
     - Enter keywords: "WordPress, SEO, optimization"
     - Select industry: Technology
     - Click "Generate Content"
   - Verify content is generated and can be inserted

2. **SEO Analysis Test**
   - Write some content in the post editor
   - Click "Analyze SEO" in the SEO Analysis sidebar
   - Review the analysis results and recommendations

3. **Keyword Research Test**
   - Go to SEOForge MCP Dashboard
   - Click "Start Research"
   - Enter a seed keyword (e.g., "digital marketing")
   - Review the keyword suggestions

## üîß Features

### MCP Server Capabilities

- **Content Generation**: AI-powered SEO-optimized content creation
- **SEO Analysis**: Comprehensive content analysis with recommendations
- **Keyword Research**: Intelligent keyword suggestions and analysis
- **Bilingual Support**: English and Thai language support
- **WordPress Authentication**: Secure nonce-based authentication
- **Rate Limiting**: 100 requests per hour per WordPress site

### WordPress Plugin Features

- **Admin Interface**: Intuitive content generation and analysis tools
- **Meta Boxes**: Integrated sidebar tools in post editor
- **REST API**: `/wp-json/seoforge-mcp/v1/` endpoints
- **AJAX Support**: Real-time content generation and analysis
- **Connection Testing**: Built-in server connectivity testing
- **Multi-language**: Support for English and Thai

## üîê Security

### Authentication Flow

1. WordPress plugin generates a nonce using:
   ```php
   hash('sha256', $site_url . ':' . $timestamp . ':' . $secret_key)
   ```

2. Request headers include:
   - `X-WordPress-Key`: API key for identification
   - `X-WordPress-Site`: WordPress site URL
   - `X-WordPress-Nonce`: Generated nonce
   - `X-WordPress-Timestamp`: Current timestamp

3. Server validates:
   - Domain is in allowed list
   - Nonce is valid and not expired
   - Rate limits are not exceeded

### Security Best Practices

- Use HTTPS for all communications
- Set strong secret keys
- Limit allowed domains
- Monitor rate limits
- Regular security updates

## üìä API Endpoints

### MCP Protocol Endpoints

- `POST /mcp-server` - Main MCP protocol endpoint
- `GET /mcp-server/health` - MCP server health check

### WordPress Plugin Endpoints

- `POST /wordpress/plugin` - WordPress plugin API
- `GET /wordpress/plugin/health` - Plugin integration health check

### General Endpoints

- `GET /health` - General server health check
- `GET /docs` - API documentation
- `GET /redoc` - Alternative API documentation

## üõ† Development

### Local Development Setup

```bash
# Backend
cd backend
pip install -r requirements.txt
uvicorn main:app --reload --host 0.0.0.0 --port 8000

# Frontend (if needed)
cd frontend
npm install
npm run dev

# WordPress Plugin
# Copy wordpress-plugin folder to your local WordPress installation
```

### Testing with WordPress Playground

```bash
# Generate plugin ZIP and test
python test_wordpress_playground.py

# Follow the generated installation guide
cat /tmp/wordpress-playground-installation-guide.md
```

## üîÑ MCP Protocol Implementation

### Supported Methods

- `initialize` - Initialize MCP connection
- `tools/list` - List available tools
- `tools/call` - Execute a tool
- `prompts/list` - List available prompts
- `prompts/get` - Get a prompt template
- `resources/list` - List available resources
- `resources/read` - Read a resource

### Example MCP Request

```json
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "content_generation",
    "arguments": {
      "topic": "WordPress SEO Best Practices",
      "content_type": "blog_post",
      "keywords": ["WordPress", "SEO", "optimization"],
      "industry": "technology",
      "language": "en"
    }
  },
  "id": 1
}
```

## üö® Troubleshooting

### Common Issues

1. **Connection Failed**
   - Check API URL is correct
   - Verify secret key matches
   - Ensure domain is in allowed list
   - Check server is running

2. **Authentication Errors**
   - Verify secret key configuration
   - Check timestamp is current
   - Ensure nonce generation is correct

3. **Rate Limiting**
   - Wait for rate limit window to reset
   - Check if multiple sites are using same domain
   - Consider upgrading rate limits

### Debug Mode

Enable WordPress debug mode:
```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
```

Check logs in `/wp-content/debug.log`

## üìà Performance Optimization

### Server Optimization

- Use Redis for session storage and caching
- Enable CORS for specific domains only
- Implement request queuing for high traffic
- Monitor response times and error rates

### WordPress Optimization

- Cache API responses when appropriate
- Use WordPress transients for temporary data
- Optimize database queries
- Minimize JavaScript and CSS

## üîÆ Advanced Configuration

### Custom Content Types

```php
add_filter('seoforge_mcp_post_types', function($post_types) {
    $post_types[] = 'your_custom_type';
    return $post_types;
});
```

### Custom Industries

```php
add_filter('seoforge_mcp_industries', function($industries) {
    $industries['custom_industry'] = 'Custom Industry Name';
    return $industries;
});
```

### Custom Tool Parameters

Extend tool parameters by modifying the MCP server configuration in `main.py`.

## üìû Support

- **Documentation**: [GitHub Wiki](https://github.com/khiwniti/SEOForge-mcp-server/wiki)
- **Issues**: [GitHub Issues](https://github.com/khiwniti/SEOForge-mcp-server/issues)
- **Discussions**: [GitHub Discussions](https://github.com/khiwniti/SEOForge-mcp-server/discussions)

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.