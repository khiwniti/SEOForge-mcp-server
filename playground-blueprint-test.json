{
  "landingPage": "/wp-admin/admin.php?page=seo-forge",
  "preferredVersions": {
    "php": "8.0",
    "wp": "latest"
  },
  "phpExtensionBundles": ["kitchen-sink"],
  "features": {
    "networking": true
  },
  "steps": [
    {
      "step": "login",
      "username": "admin",
      "password": "password"
    },
    {
      "step": "mkdir",
      "path": "/wordpress/wp-content/plugins/seo-forge-test"
    },
    {
      "step": "writeFile",
      "path": "/wordpress/wp-content/plugins/seo-forge-test/seo-forge-test.php",
      "data": "<?php\n/**\n * Plugin Name: SEO Forge - Playground Test\n * Description: SEO Forge plugin for WordPress Playground testing with MCP server integration\n * Version: 1.0.0\n * Author: SEO Forge Team\n * License: MIT\n */\n\ndefined('ABSPATH') || exit;\n\nclass SEOForgePlaygroundTest {\n    \n    private $api_url = 'https://seoforge-mcp-platform.vercel.app';\n    \n    public function __construct() {\n        add_action('admin_menu', [$this, 'add_admin_menu']);\n        add_action('admin_enqueue_scripts', [$this, 'enqueue_scripts']);\n        add_action('wp_ajax_seoforge_generate_content', [$this, 'ajax_generate_content']);\n        add_action('wp_ajax_seoforge_generate_image', [$this, 'ajax_generate_image']);\n        add_action('add_meta_boxes', [$this, 'add_meta_boxes']);\n        add_action('wp_head', [$this, 'add_meta_tags']);\n    }\n    \n    public function add_admin_menu() {\n        add_menu_page(\n            'SEO Forge',\n            'SEO Forge',\n            'manage_options',\n            'seo-forge',\n            [$this, 'dashboard_page'],\n            'data:image/svg+xml;base64,' . base64_encode('<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z\"/><path d=\"M9 12l2 2 4-4\" stroke=\"white\" stroke-width=\"2\" fill=\"none\"/></svg>'),\n            30\n        );\n        \n        add_submenu_page(\n            'seo-forge',\n            'Content Generator',\n            'Content Generator',\n            'edit_posts',\n            'seo-forge-generator',\n            [$this, 'generator_page']\n        );\n    }\n    \n    public function enqueue_scripts($hook) {\n        if (strpos($hook, 'seo-forge') !== false || in_array($hook, ['post.php', 'post-new.php'])) {\n            wp_localize_script('jquery', 'seoForgeAjax', [\n                'ajaxUrl' => admin_url('admin-ajax.php'),\n                'nonce' => wp_create_nonce('seoforge_nonce'),\n                'apiUrl' => $this->api_url\n            ]);\n        }\n    }\n    \n    public function add_meta_boxes() {\n        add_meta_box(\n            'seoforge-content-generator',\n            'SEO Forge - Content Generator',\n            [$this, 'content_generator_meta_box'],\n            ['post', 'page'],\n            'side',\n            'high'\n        );\n    }\n    \n    public function content_generator_meta_box($post) {\n        wp_nonce_field('seoforge_meta_box', 'seoforge_meta_box_nonce');\n        ?>\n        <div class=\"seoforge-meta-box\">\n            <div class=\"seoforge-field\">\n                <label for=\"seoforge-keywords\">Keywords:</label>\n                <input type=\"text\" id=\"seoforge-keywords\" placeholder=\"Enter keywords (e.g., WordPress SEO, content optimization)\" style=\"width: 100%; margin-bottom: 10px;\">\n                <small>Enter keywords separated by commas</small>\n            </div>\n            \n            <div class=\"seoforge-field\">\n                <label for=\"seoforge-industry\">Industry:</label>\n                <select id=\"seoforge-industry\" style=\"width: 100%; margin-bottom: 10px;\">\n                    <option value=\"\">Select Industry</option>\n                    <option value=\"technology\">Technology</option>\n                    <option value=\"healthcare\">Healthcare</option>\n                    <option value=\"finance\">Finance</option>\n                    <option value=\"education\">Education</option>\n                    <option value=\"retail\">Retail</option>\n                </select>\n            </div>\n            \n            <div class=\"seoforge-field\">\n                <label for=\"seoforge-content-type\">Content Type:</label>\n                <select id=\"seoforge-content-type\" style=\"width: 100%; margin-bottom: 10px;\">\n                    <option value=\"blog_post\">Blog Post</option>\n                    <option value=\"product_description\">Product Description</option>\n                    <option value=\"landing_page\">Landing Page</option>\n                    <option value=\"how_to_guide\">How-to Guide</option>\n                </select>\n            </div>\n            \n            <div class=\"seoforge-field\">\n                <label for=\"seoforge-language\">Language:</label>\n                <select id=\"seoforge-language\" style=\"width: 100%; margin-bottom: 10px;\">\n                    <option value=\"en\">English</option>\n                    <option value=\"th\">Thai</option>\n                    <option value=\"es\">Spanish</option>\n                    <option value=\"fr\">French</option>\n                </select>\n            </div>\n            \n            <div class=\"seoforge-buttons\">\n                <button type=\"button\" id=\"generate-content-btn\" class=\"button button-primary\" style=\"margin-right: 10px;\">\n                    Generate Content\n                </button>\n                <button type=\"button\" id=\"generate-image-btn\" class=\"button\">\n                    Generate Image\n                </button>\n            </div>\n            \n            <div id=\"seoforge-loading\" style=\"display: none; margin: 10px 0;\">\n                <p>ü§ñ Generating content with AI... Please wait.</p>\n            </div>\n            \n            <div id=\"seoforge-result\" style=\"display: none; margin-top: 15px;\">\n                <h4>Generated Content:</h4>\n                <div id=\"generated-content\" style=\"background: #f9f9f9; padding: 10px; border-radius: 4px; max-height: 200px; overflow-y: auto;\"></div>\n                <button type=\"button\" id=\"use-content-btn\" class=\"button button-primary\" style=\"margin-top: 10px;\">\n                    Use This Content\n                </button>\n            </div>\n            \n            <div id=\"seoforge-image-result\" style=\"display: none; margin-top: 15px;\">\n                <h4>Generated Image:</h4>\n                <div id=\"generated-image\" style=\"text-align: center;\"></div>\n            </div>\n        </div>\n        \n        <style>\n        .seoforge-meta-box {\n            padding: 10px 0;\n        }\n        .seoforge-field {\n            margin-bottom: 15px;\n        }\n        .seoforge-field label {\n            display: block;\n            font-weight: 600;\n            margin-bottom: 5px;\n        }\n        .seoforge-buttons {\n            margin: 15px 0;\n        }\n        #generated-content {\n            font-size: 14px;\n            line-height: 1.5;\n        }\n        #generated-image img {\n            max-width: 100%;\n            height: auto;\n            border-radius: 4px;\n        }\n        </style>\n        \n        <script>\n        jQuery(document).ready(function($) {\n            $('#generate-content-btn').on('click', function() {\n                var keywords = $('#seoforge-keywords').val();\n                if (!keywords) {\n                    alert('Please enter keywords first!');\n                    return;\n                }\n                \n                var data = {\n                    action: 'seoforge_generate_content',\n                    nonce: seoForgeAjax.nonce,\n                    keywords: keywords,\n                    industry: $('#seoforge-industry').val(),\n                    content_type: $('#seoforge-content-type').val(),\n                    language: $('#seoforge-language').val()\n                };\n                \n                $('#seoforge-loading').show();\n                $('#generate-content-btn').prop('disabled', true).text('Generating...');\n                \n                $.post(seoForgeAjax.ajaxUrl, data, function(response) {\n                    $('#seoforge-loading').hide();\n                    $('#generate-content-btn').prop('disabled', false).text('Generate Content');\n                    \n                    if (response.success) {\n                        $('#generated-content').html(response.data.content || response.data);\n                        $('#seoforge-result').show();\n                        \n                        if (response.data.title && $('#title').length) {\n                            $('#title').val(response.data.title);\n                        }\n                    } else {\n                        alert('Error: ' + (response.data || 'Failed to generate content'));\n                    }\n                }).fail(function() {\n                    $('#seoforge-loading').hide();\n                    $('#generate-content-btn').prop('disabled', false).text('Generate Content');\n                    alert('Network error. Please try again.');\n                });\n            });\n            \n            $('#generate-image-btn').on('click', function() {\n                var keywords = $('#seoforge-keywords').val();\n                if (!keywords) {\n                    alert('Please enter keywords first!');\n                    return;\n                }\n                \n                var data = {\n                    action: 'seoforge_generate_image',\n                    nonce: seoForgeAjax.nonce,\n                    prompt: 'Professional image related to: ' + keywords,\n                    style: 'realistic'\n                };\n                \n                $('#generate-image-btn').prop('disabled', true).text('Generating Image...');\n                \n                $.post(seoForgeAjax.ajaxUrl, data, function(response) {\n                    $('#generate-image-btn').prop('disabled', false).text('Generate Image');\n                    \n                    if (response.success && response.data.url) {\n                        $('#generated-image').html('<img src=\"' + response.data.url + '\" alt=\"Generated Image\">');\n                        $('#seoforge-image-result').show();\n                    } else {\n                        alert('Error: ' + (response.data || 'Failed to generate image'));\n                    }\n                }).fail(function() {\n                    $('#generate-image-btn').prop('disabled', false).text('Generate Image');\n                    alert('Network error. Please try again.');\n                });\n            });\n            \n            $('#use-content-btn').on('click', function() {\n                var content = $('#generated-content').html();\n                \n                if (typeof tinymce !== 'undefined' && tinymce.get('content')) {\n                    tinymce.get('content').setContent(content);\n                } else if ($('#content').length) {\n                    $('#content').val(content);\n                }\n                \n                alert('Content inserted successfully!');\n            });\n        });\n        </script>\n        <?php\n    }\n    \n    public function ajax_generate_content() {\n        check_ajax_referer('seoforge_nonce', 'nonce');\n        \n        if (!current_user_can('edit_posts')) {\n            wp_send_json_error('Insufficient permissions');\n        }\n        \n        $keywords = sanitize_text_field($_POST['keywords'] ?? '');\n        $industry = sanitize_text_field($_POST['industry'] ?? '');\n        $content_type = sanitize_text_field($_POST['content_type'] ?? 'blog_post');\n        $language = sanitize_text_field($_POST['language'] ?? 'en');\n        \n        if (empty($keywords)) {\n            wp_send_json_error('Keywords are required');\n        }\n        \n        $data = [\n            'action' => 'generate_content',\n            'data' => [\n                'keywords' => $keywords,\n                'industry' => $industry,\n                'type' => $content_type,\n                'language' => $language,\n                'tone' => 'professional',\n                'length' => 'medium',\n                'include_title' => true,\n                'include_meta_description' => true\n            ],\n            'site_url' => get_site_url(),\n            'user_id' => get_current_user_id(),\n            'version' => '1.0.0'\n        ];\n        \n        $response = $this->make_api_request($data);\n        \n        if (is_wp_error($response)) {\n            wp_send_json_error($response->get_error_message());\n        }\n        \n        wp_send_json_success($response);\n    }\n    \n    public function ajax_generate_image() {\n        check_ajax_referer('seoforge_nonce', 'nonce');\n        \n        if (!current_user_can('upload_files')) {\n            wp_send_json_error('Insufficient permissions');\n        }\n        \n        $prompt = sanitize_text_field($_POST['prompt'] ?? '');\n        $style = sanitize_text_field($_POST['style'] ?? 'realistic');\n        \n        if (empty($prompt)) {\n            wp_send_json_error('Image prompt is required');\n        }\n        \n        $data = [\n            'action' => 'generate_image',\n            'data' => [\n                'prompt' => $prompt,\n                'style' => $style,\n                'size' => '1024x1024',\n                'quality' => 'high'\n            ],\n            'site_url' => get_site_url(),\n            'user_id' => get_current_user_id(),\n            'version' => '1.0.0'\n        ];\n        \n        $response = $this->make_api_request($data);\n        \n        if (is_wp_error($response)) {\n            wp_send_json_error($response->get_error_message());\n        }\n        \n        wp_send_json_success($response);\n    }\n    \n    private function make_api_request($data) {\n        $url = $this->api_url . '/wordpress/plugin';\n        \n        $headers = [\n            'Content-Type' => 'application/json',\n            'X-WordPress-Site' => get_site_url(),\n            'X-WordPress-Timestamp' => time(),\n            'User-Agent' => 'SEO Forge WordPress Plugin/1.0.0'\n        ];\n        \n        $body = wp_json_encode($data);\n        \n        $args = [\n            'headers' => $headers,\n            'body' => $body,\n            'timeout' => 30,\n            'method' => 'POST'\n        ];\n        \n        $response = wp_remote_post($url, $args);\n        \n        if (is_wp_error($response)) {\n            return $response;\n        }\n        \n        $response_code = wp_remote_retrieve_response_code($response);\n        $response_body = wp_remote_retrieve_body($response);\n        \n        if ($response_code !== 200) {\n            return new WP_Error('api_error', \"API request failed with code: $response_code. Response: $response_body\");\n        }\n        \n        $decoded = json_decode($response_body, true);\n        \n        if (json_last_error() !== JSON_ERROR_NONE) {\n            return new WP_Error('json_error', 'Invalid JSON response from server');\n        }\n        \n        return $decoded;\n    }\n    \n    public function add_meta_tags() {\n        echo '<meta name=\"generator\" content=\"SEO Forge 1.0.0\">' . \"\\n\";\n    }\n    \n    public function dashboard_page() {\n        ?>\n        <div class=\"wrap\">\n            <h1>SEO Forge Dashboard</h1>\n            <div style=\"background: white; padding: 20px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);\">\n                <h2>üöÄ Welcome to SEO Forge!</h2>\n                <p>Universal SEO WordPress Plugin with AI-powered content generation and optimization.</p>\n                \n                <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;\">\n                    <div style=\"border: 1px solid #ddd; padding: 20px; border-radius: 8px;\">\n                        <h3>ü§ñ Content Generator</h3>\n                        <p>Generate SEO-optimized content using AI. Create blog posts, product descriptions, and more.</p>\n                        <a href=\"<?php echo admin_url('admin.php?page=seo-forge-generator'); ?>\" class=\"button button-primary\">Generate Content</a>\n                    </div>\n                    \n                    <div style=\"border: 1px solid #ddd; padding: 20px; border-radius: 8px;\">\n                        <h3>üìù Create New Post</h3>\n                        <p>Create a new post with SEO Forge meta boxes for content generation and optimization.</p>\n                        <a href=\"<?php echo admin_url('post-new.php'); ?>\" class=\"button button-primary\">New Post</a>\n                    </div>\n                    \n                    <div style=\"border: 1px solid #ddd; padding: 20px; border-radius: 8px;\">\n                        <h3>‚öôÔ∏è API Status</h3>\n                        <p><strong>Server:</strong> <?php echo esc_html($this->api_url); ?></p>\n                        <p><strong>Status:</strong> <span style=\"color: green;\">‚úÖ Ready</span></p>\n                        <button type=\"button\" id=\"test-api\" class=\"button\">Test Connection</button>\n                    </div>\n                </div>\n                \n                <div style=\"background: #f0f8ff; border: 1px solid #0288d1; border-radius: 6px; padding: 15px; margin: 20px 0;\">\n                    <h3 style=\"margin: 0 0 10px; color: #01579b;\">üß™ Testing Instructions</h3>\n                    <ol style=\"margin: 0; color: #01579b;\">\n                        <li>Go to <strong>Posts ‚Üí Add New</strong> to create a new blog post</li>\n                        <li>In the <strong>SEO Forge - Content Generator</strong> meta box (sidebar), enter keywords like \"WordPress SEO optimization\"</li>\n                        <li>Select an industry (e.g., Technology) and content type (Blog Post)</li>\n                        <li>Click <strong>\"Generate Content\"</strong> to create AI-powered content</li>\n                        <li>Click <strong>\"Generate Image\"</strong> to create a featured image</li>\n                        <li>Use the generated content and publish your post</li>\n                        <li>Check the frontend to see SEO meta tags in action</li>\n                    </ol>\n                </div>\n            </div>\n        </div>\n        \n        <script>\n        jQuery(document).ready(function($) {\n            $('#test-api').on('click', function() {\n                $(this).prop('disabled', true).text('Testing...');\n                \n                $.post(ajaxurl, {\n                    action: 'seoforge_generate_content',\n                    nonce: '<?php echo wp_create_nonce('seoforge_nonce'); ?>',\n                    keywords: 'test connection'\n                }, function(response) {\n                    $('#test-api').prop('disabled', false).text('Test Connection');\n                    if (response.success) {\n                        alert('‚úÖ API Connection Successful!\\n\\nYour MCP server is responding correctly.');\n                    } else {\n                        alert('‚ùå API Connection Failed:\\n\\n' + (response.data || 'Unknown error'));\n                    }\n                }).fail(function() {\n                    $('#test-api').prop('disabled', false).text('Test Connection');\n                    alert('‚ùå Network Error:\\n\\nCould not connect to the server.');\n                });\n            });\n        });\n        </script>\n        <?php\n    }\n    \n    public function generator_page() {\n        echo '<div class=\"wrap\"><h1>Content Generator</h1><p>Use the meta boxes in post editor for content generation.</p></div>';\n    }\n}\n\nnew SEOForgePlaygroundTest();"
    },
    {
      "step": "activatePlugin",
      "pluginPath": "seo-forge-test/seo-forge-test.php"
    },
    {
      "step": "runPHP",
      "code": "<?php\n// Create a sample post for testing\n$post_data = array(\n    'post_title' => 'Test Post for SEO Forge',\n    'post_content' => 'This is a test post to demonstrate SEO Forge content generation capabilities.',\n    'post_status' => 'draft',\n    'post_type' => 'post'\n);\nwp_insert_post($post_data);\necho 'Sample post created for testing!';\n?>"
    }
  ]
}